<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互动小说 - 游戏</title>
    <link rel="stylesheet" href="css/creator.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    
    <div class="game-container">
        <!-- 左侧剧情树面板 -->
        <aside class="story-tree-panel">
            <h2>剧情树</h2>
            <div class="story-tree" id="storyTree">
                <!-- 剧情树节点将通过 JS 动态生成 -->
            </div>
            <div class="tree-controls">
    <button class="tree-btn edit-title-btn" title="编辑标题"><i class="fas fa-edit"></i> 编辑标题</button>
    
</div>
        </aside>

        <!-- 主要内容区域 -->
        <main class="story-area">
            <!-- 角色展示区 -->
            <div class="characters-showcase">
                <div class="character-cards" id="characterCards">
                    <!-- 角色卡片将通过 JS 动态生成 -->
                </div>
            </div>

            <!-- 故事内容区 -->
            <div class="story-content">
                <div class="stage-title">
    <h2 id="currentStageTitle">第一章：序章</h2>
    <button class="edit-title-btn" title="编辑标题"><i class="fas fa-edit"></i></button>
</div>
<div id="loadingOverlay" style="display: none;">
    <div class="spinner"></div>
    <div id="loadingMessage"></div>
  </div>
                <div class="story-image-container">
                    <img id="storyImage" src="test.png" alt="场景图片">
                    
                </div>
                <div class="story-text-container">
                    <p id="storyText" class="story-text"></p>
                    <button class="edit-story-btn" title="编辑剧情"><i class="fas fa-edit"></i></button>
                </div>
                <div class="story-input-container">
    <input 
        type="text" 
        id="storyCustomInput" 
        class="story-custom-input" 
        placeholder="输入修改内容..."
    >
    <button class="apply-modification-btn" title="应用修改"><i class="fas fa-check"></i> 应用修改</button>
</div>
            </div>

            <!-- 玩家选择区 - 隐藏选择按钮 -->
            <div class="player-interaction">
                <div class="choices-container" style="display: none;">
                    <h3>接下来你打算：</h3>
                    <div class="choices" id="choiceButtons">
                        <!-- 选择按钮将通过 JS 动态生成 -->
                    </div>
                </div>
                <div class="theme-selection hidden" id="themeSelection">
                    <h3>选择下一阶段的发展方向：</h3>
                    <div class="theme-buttons">
                        <button class="theme-btn" data-theme="emotion">情感互动</button>
                        <button class="theme-btn" data-theme="mystery">解密探索</button>
                        <button class="theme-btn" data-theme="action">动作冒险</button>
                        <button class="theme-btn" data-theme="drama">剧情发展</button>
                    </div>
                    <button class="confirm-theme-btn" disabled>确认选择</button>
                </div>
            </div>
        </main>

        <!-- 右侧控制面板 -->
        <aside class="control-panel">
            <div class="story-info">
                <h3>故事信息</h3>
                <div class="info-content">
                    <!-- <p><strong>背景：</strong><span id="storyBackground"></span></p> -->
                    <p><strong>当前章节：</strong><span id="currentChapter"></span></p>
                    
                </div>
            </div>
            <div class="story-buttons">
                <button class="control-btn story-info-btn"><i class="fas fa-book"></i> 故事背景</button>
                <button class="control-btn character-info-btn"><i class="fas fa-users"></i> 角色设定</button>
            </div>
            <div class="game-controls">
                <button class="control-btn save-btn"><i class="fas fa-save"></i> 导出小说</button>
                <div id="exportPreviewModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); padding: 20px; box-sizing: border-box;">
  <div class="modal-content" style="background-color: white; margin: 5% auto; padding: 20px; border-radius: 8px; width: 80%; max-width: 1000px; max-height: 80vh; overflow-y: auto; position: relative;">
    <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px;">
      <h2 style="margin: 0;">小说导出预览</h2>
      <span class="close-modal" style="cursor: pointer; font-size: 28px;">&times;</span>
    </div>
    <div class="modal-body" id="exportPreviewContent" style="padding: 10px 0;">
      <!-- 动态内容将在这里生成 -->
    </div>
    <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 15px; padding: 15px 0; border-top: 1px solid #eee; margin-top: 20px;">
      <button id="cancelExportBtn" style="padding: 8px 20px; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; background: #f5f5f5;">取消</button>
      <button id="confirmExportBtn" style="padding: 8px 20px; border: none; border-radius: 4px; cursor: pointer; background: #4CAF50; color: white;">下载小说</button>
    </div>
  </div>
</div>
                <button class="control-btn load-btn"><i class="fas fa-folder-open"></i> 退出</button>
               
            </div>
            <div class="story-history">
                <h3>剧情修改记录</h3>
                <div class="history-content" id="storyHistory">
                    <!-- 历史记录将从底部开始添加 -->
                </div>
            </div>
        </aside>
    </div>

    <!-- 编辑模态框 -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modalTitle">编辑内容</h2>
            <textarea id="modalInput"></textarea>
            <div class="modal-buttons">
                <button class="save-modal-btn">保存</button>
                <button class="cancel-modal-btn">取消</button>
            </div>
        </div>
    </div>

    <!-- 故事背景模态框 -->
    <div class="modal" id="storyInfoModal">
        <div class="modal-content wide-modal">
            <span class="close-modal">&times;</span>
            <h2>故事背景</h2>
            <div class="story-info-content">
                <div class="background-section">
                    <h3></h3>
                    <p id="worldBackground"></p>
                </div>
                
            </div>
        </div>
    </div>

    <!-- 角色设定模态框 -->
    <div class="modal" id="characterInfoModal">
        <div class="modal-content wide-modal">
            <span class="close-modal">&times;</span>
            <h2>角色设定</h2>
            <div class="character-grid" id="characterGrid">
                <!-- 角色卡片将通过 JS 动态生成 -->
            </div>
        </div>
    </div>

    <!-- 图片生成设置模态框 -->
    <div class="modal" id="imageGenerateModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>生成插画设置</h2>
            <div class="image-generate-form">
                <div class="form-group">
                    <label>场景描述</label>
                    <textarea id="sceneDescription" placeholder="描述你想要的场景，例如：一个阳光明媚的森林小径，周围有繁花似锦..."></textarea>
                </div>
                <div class="form-group">
                    <label>艺术风格</label>
                    <select id="artStyle">
                        <option value="realistic">写实风格</option>
                        <option value="anime">动漫风格</option>
                        <option value="watercolor">水彩画风格</option>
                        <option value="oil">油画风格</option>
                        <option value="pixel">像素风格</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>色调倾向</label>
                    <select id="colorTone">
                        <option value="warm">温暖色调</option>
                        <option value="cold">冷色调</option>
                        <option value="neutral">中性色调</option>
                        <option value="vibrant">鲜艳色调</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>其他要求</label>
                    <textarea id="additionalRequirements" placeholder="其他特殊要求，如构图、光影效果等..."></textarea>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="generate-image-btn">生成插画</button>
                <button class="cancel-modal-btn">取消</button>
            </div>
        </div>
    </div>

    <script src="js/creator.js"></script>
</body>
</html>


